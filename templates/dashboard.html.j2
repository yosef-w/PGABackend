<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PGA Parking Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .percent-high { color: green; font-weight: bold; }
    .percent-mid { color: orange; font-weight: bold; }
    .percent-low { color: red; font-weight: bold; }
  </style>
</head>
<body class="bg-light">
  <div class="container mt-5">
    <h1 class="mb-4">PGA Parking Dashboard</h1>
    <button class="btn btn-primary mb-3" onclick="location.reload()">Refresh</button>

    {% for garage in data %}
      <div class="card mb-4 shadow-sm">
        <div class="card-header bg-primary text-white">
          <h2 class="h5">{{ garage.garage_name }}</h2>
          <p class="mb-0">
            Total Bays: {{ garage.total_bays }} |
            Available Bays: {{ garage.available_bays }} |
            Available: <span class="{% if garage.percent_available >= 75 %}percent-high{% elif garage.percent_available >= 40 %}percent-mid{% else %}percent-low{% endif %}">
              {{ garage.percent_available | round(1) }}%
            </span>
          </p>
        </div>
        <div class="card-body">
          {% for level in garage.levels %}
            <div class="mb-3">
              <h3 class="h6">Level: {{ level.level_name }}</h3>
              <p>
                Total Bays: {{ level.total_bays }} |
                Available Bays: {{ level.available_bays }} |
                Available: <span class="{% if level.percent_available >= 75 %}percent-high{% elif level.percent_available >= 40 %}percent-mid{% else %}percent-low{% endif %}">
                  {{ level.percent_available | round(1) }}%
                </span>
              </p>

              <table class="table table-sm table-bordered table-hover">
                <thead class="table-light">
                  <tr>
                    <th>Zone</th>
                    <th>Total Bays</th>
                    <th>Available Bays</th>
                    <th>% Available</th>
                  </tr>
                </thead>
                <tbody>
                  {% for zone in level.zones %}
                    <tr>
                      <td>{{ zone.zone_name }}</td>
                      <td>{{ zone.total_bays }}</td>
                      <td>{{ zone.available_bays }}</td>
                      <td>
                        <span class="{% if zone.percent_available >= 75 %}percent-high{% elif zone.percent_available >= 40 %}percent-mid{% else %}percent-low{% endif %}">
                          {{ zone.percent_available | round(1) }}%
                        </span>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>
</body>
</html>
